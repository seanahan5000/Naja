				LST	OFF
LINENUM			EQU	$00	
ORBLINE			EQU	$01	
CATION			EQU	$02
COUNTER			EQU	$03	
SHIFT			EQU	$04
SCRATCH			EQU	$06	
XCOORD			EQU	$08
TBLPNTL			EQU	$0D	
DESTINL			EQU	$0D	
TBLPNTH			EQU	$0E	
DESTINH			EQU	$0E	
POINTL			EQU	$12	
POINTH			EQU	$13	
SCREENL			EQU	$26	
SCREENH			EQU	$27	
CHARDL			EQU	$91
COUNT			EQU	$C0	
COLOR			EQU	$E4
PAGE			EQU	$E6	
TEXTBUF			EQU	$0200
MOVETO1			EQU	$0326	
WAIT			EQU	$0389
WAIT2			EQU	$0395
LOBYTES			EQU	$0800	
HIBYTES			EQU	$08C0	
LINEOUT			EQU	$0980	
TEXTOUT			EQU	$09E0	
LINE			EQU	$0B33
EXPANDR			EQU	$0C60	
CLEAR2			EQU	$1212	
POINTIT			EQU	$12D3
NAMEIT			EQU	$131B
PROGON			EQU	$4079	
RDKEY			EQU	$6000
GETNSEW			EQU	$614A	
NOSCAN			EQU	$6653	
CPARER2			EQU	$B423
LOCATE			EQU	$B437
CORESPS			EQU	$B4EF
TRACER			EQU	$BAE0	
KEYBRD			EQU	$C000
UNSTROB			EQU	$C010
PRIMARY			EQU	$C054	
SCNDARY			EQU	$C055	
GREEN			EQU	$2A	
				ORG	$9C00
				LDA	#$40
				STA	PAGE
				JSR	CLEAR2
				JSR	GETNSEW
				JSR	NOSCAN
				LDA	#<PPIC0
				STA	TBLPNTL
				LDA	#>PPIC0
				STA	TBLPNTH
				JSR	EXPANDR
				LDA	#$76	
				STA	ORBLINE
				LDA	TRACER+2	
				AND	#$80	
				BEQ	ORBHERE
				LDA	#$20
				STA	PAGE
				STA	SCNDARY
				JSR	MOVETO1
				STA	PRIMARY
				JMP	KEYWAIT
ORBHERE			JSR	DRAW
				STA	SCNDARY
				JSR	MOVETO1
				STA	PRIMARY
				JSR	CLEAR2
				LDA	#GREEN
				STA	COLOR
				LDA	#<LINE0
				STA	POINTL
				LDA	#>LINE0
				STA	POINTH
				JSR	LINEOUT
				LDY	#$00
				JSR	TEXTER
				JSR	FLIPBOX
				LDA	#$20
				STA	PAGE
				JSR	LOCATE
				STA	CATION
				LDA	#$A0
				STA	SPASPOT+1
				JSR	ANIMATE
				LDA	CATION
				BMI	NOROOM
				LSR	A
				LSR	A
				LSR	A
				LSR	A
				JSR	POINTIT
				LDA	CATION
				AND	#$0F
				TAY
				LDA	CORESPS,Y
				TAY
				LDX	#$00
GIVORB			LDA	DATAORB,X
				STA	(CHARDL),Y
				INY
				INX
				CPX	#$04
				BNE	GIVORB
				LDA	TRACER+2	
				ORA	#$C0	
				STA	TRACER+2	
				JSR	ERASE
				JSR	CLRBOX
				LDX	#$00
				LDY	#$00
				JSR	NAMEIT
DESPAC			DEX
				LDA	TEXTBUF,X
				CMP	#$0A
				BEQ	DESPAC	
				LDA	#$8D
				STA	TEXTBUF+1,X
				LDA	#$0A
				LDY	#$27
				JSR	LINE
				LDA	XCOORD
				STA	TEXT2
				LDA	SHIFT
				STA	TEXT2+1
				LDY	#$02
				JSR	TEXTER
				LDX	#$05	
WAITER			LDA	#$00
				JSR	WAIT2
				DEX
				BPL	WAITER
				JSR	FLIPBOX
KEYWAIT			LDA	KEYBRD
				BPL	KEYWAIT
				JSR	CPARER2
				BEQ	GORDKEY	
				BIT	UNSTROB
				JMP	KEYWAIT
NOROOM			JSR	CLRBOX
				LDY	#$01
				JSR	TEXTER
				LDA	#$00
				STA	SPASPOT+1
ANIMATE			LDA	ORBLINE
				CMP	#$54	
				BEQ	DOWN
				DEC	ORBLINE
				JSR	DRAW
				JSR	SPACER
				BIT	UNSTROB
				LDA	#$A0	
				JSR	WAIT
				JMP	ANIMATE
DOWN			LDA	ORBLINE
				CMP	#$76	
				BEQ	ANIMATE
				INC	ORBLINE
				JSR	DRAW
				JSR	SPACER
				LDA	#$A0	
				JSR	WAIT
				JMP	DOWN
SPACER			LDA	KEYBRD
				BPL	SPACOUT
				JSR	CPARER2
				BEQ	GORDKEY
				BIT	UNSTROB
SPASPOT			CMP	#$A0
				BNE	SPACOUT
				PLA
				PLA
SPACOUT			RTS
GORDKEY			LDA	#$B7
				STA	PROGON
				JMP	RDKEY
DATAORB			DFB	$43,$02,$00
				DFB	$DF
DRAW			LDA	ORBLINE
				STA	LINENUM
				LDA	#$11	
				STA	COUNT
				LDX	#$00
DRLOOP1			LDY	LINENUM
				LDA	LOBYTES,Y
				STA	SCREENL
				LDA	HIBYTES,Y
				ORA	PAGE
				STA	SCREENH
				CPY	#$74
				BNE	NORMAL
				JSR	DRAW2
				JMP	DRSKIP
NORMAL			LDY	#$12
DRLOOP2			LDA	ORBDATA,X
				STA	(SCREENL),Y
				INX
				INY
				CPY	#$16
				BNE	DRLOOP2
DRSKIP			INC	LINENUM
				DEC	COUNT
				BNE	DRLOOP1
				RTS
DRAW2			LDY	ORBLINE
				LDA	ODOFFS-100,Y
				STA	SCRATCH
				LDA	#$12
				STA	COUNTER
DTLOOP2			LDY	SCRATCH
				LDA	ORBDATA,X
				ORA	ODATA2,Y
				LDY	COUNTER
				STA	(SCREENL),Y
				INX
				INC	SCRATCH
				INC	COUNTER
				LDA	COUNTER
				CMP	#$16
				BNE	DTLOOP2
				RTS
ERASE			LDA	ORBLINE
				STA	LINENUM
				LDA	#$11	
				STA	COUNT
ERLOOP1			LDX	LINENUM
				LDA	LOBYTES,X
				STA	SCREENL
				LDA	HIBYTES,X
				ORA	PAGE
				STA	SCREENH
				LDY	#$12
				LDA	#$00
				CPX	#$74
				BNE	ERLOOP2
				LDA	#$7F
ERLOOP2			STA	(SCREENL),Y
				INY
				CPY	#$16
				BNE	ERLOOP2
				INC	LINENUM
				DEC	COUNT
				BNE	ERLOOP1
				RTS
CLRBOX			LDX	#$1D
CLLOOP1			LDA	LOBYTES,X
				STA	SCREENL
				LDA	HIBYTES,X
				ORA	PAGE
				STA	SCREENH
				LDY	#$16
				LDA	#$00
CLLOOP2			STA	(SCREENL),Y
				DEY
				BNE	CLLOOP2
				INX
				CPX	#$38
				BNE	CLLOOP1
				RTS
FLIPBOX			LDX	#$1B
FBLOOP1			LDA	LOBYTES,X
				STA	SCREENL
				STA	DESTINL
				LDA	HIBYTES,X
				ORA	#$20
				STA	SCREENH
				EOR	#$60
				STA	DESTINH
				LDY	#$17
FBLOOP2			LDA	(SCREENL),Y
				PHA
				LDA	(DESTINL),Y
				STA	(SCREENL),Y
				PLA
				STA	(DESTINL),Y
				DEY
				BPL	FBLOOP2
				INX
				CPX	#$3A
				BNE	FBLOOP1
				RTS
TEXTER			TYA
				ASL	A
				TAY
				LDA	TEXTS,Y
				STA	POINTL
				LDA	TEXTS+1,Y
				STA	POINTH
				JMP	TEXTOUT
TEXTS			DW	TEXT0
				DW	TEXT1
				DW	TEXT2
ODOFFS			DFB	$00,$04,$08
				DFB	$0C,$0C,$10
				DFB	$10,$10,$10
				DFB	$10,$10,$10
				DFB	$0C,$0C,$08
				DFB	$04,$00
ORBDATA			DFB	$00,$00,$00
				DFB	$00
				DFB	$00,$50,$0A
				DFB	$00,$00,$54
				DFB	$2A,$00,$00
				DFB	$55,$2E,$01
				DFB	$00,$55,$3E
				DFB	$01,$20,$55
				DFB	$3A,$05,$20
				DFB	$55,$2A,$05
				DFB	$20,$55,$2A
				DFB	$05,$20,$55
				DFB	$2A,$05,$20
				DFB	$55,$2A,$05
				DFB	$20,$55,$2A
				DFB	$05,$20,$55
				DFB	$2A,$05,$00
				DFB	$55,$2A,$01
				DFB	$00,$55,$2A
				DFB	$01,$00,$54
				DFB	$2A,$00,$00
				DFB	$50,$0A,$00
				DFB	$00,$00,$00
				DFB	$00
ODATA2			DFB	$7F,$7F,$7F
				DFB	$7F
				DFB	$7F,$01,$00
				DFB	$7F,$3F,$00
				DFB	$00,$7C,$0F
				DFB	$00,$00,$70
				DFB	$03,$00,$00
				DFB	$40,$7F,$7F	
				DFB	$7F,$7F
TEXT0			DFB	$01,$03,$1F
				DFB	$23,$19,$1F
				DFB	$28,$20,$0F
				DFB	$0A,$0E,$13
				DFB	$1D,$0D,$19
				DFB	$20,$0F,$1C
				DFB	$0F,$0E,$0A
				DFB	$19,$18,$0F
				DFB	$0A,$19,$10
				DFB	$8D,$01,$03
				DFB	$27,$1E,$12
				DFB	$0F,$0A,$16
				DFB	$19,$1D,$1E
				DFB	$0A,$19,$1C
				DFB	$0C,$0A,$0E
				DFB	$19,$19,$1C
				DFB	$0A,$15,$0F
				DFB	$23,$1D,$2D	
				DFB	$8D,$01,$03
				DFB	$2F,$1A,$1C
				DFB	$0F,$1D,$1D
				DFB	$0A,$30,$1D
				DFB	$1A,$0B,$0D
				DFB	$0F,$32,$0A
				DFB	$1E,$19,$0A
				DFB	$1E,$0B,$15
				DFB	$0F,$0A,$13
				DFB	$1E,$2D,$8D
				DFB	$FF
TEXT1			DFB	$01,$03,$1F
				DFB	$18,$19,$0A
				DFB	$19,$18,$0F
				DFB	$0A,$13,$18
				DFB	$0A,$1E,$12
				DFB	$0F,$0A,$11
				DFB	$1C,$19,$1F
				DFB	$1A,$0A,$0D
				DFB	$0B,$18,$8D
				DFB	$01,$03,$27
				DFB	$0D,$0B,$1C
				DFB	$1C,$23,$0A
				DFB	$0B,$18,$23
				DFB	$1E,$12,$13
				DFB	$18,$11,$0A
				DFB	$0F,$16,$1D
				DFB	$0F,$2D,$0A
				DFB	$0A,$23,$19
				DFB	$1F,$8D,$01
				DFB	$03,$2F,$17
				DFB	$1F,$1D,$1E
				DFB	$0A,$0E,$1C
				DFB	$19,$1A,$0A
				DFB	$1D,$19,$17
				DFB	$0F,$1E,$12
				DFB	$13,$18,$11
				DFB	$0A,$10,$13
				DFB	$1C,$1D,$1E
				DFB	$2D,$8D,$FF
TEXT2			DFB	$00,$00,$27
				DFB	$0A,$1E,$0B
				DFB	$15,$0F,$1D
				DFB	$0A,$1E,$12
				DFB	$0F,$0A,$19
				DFB	$1C,$0C,$2D
				DFB	$8D,$FF
LINE0			DFB	$00,$01,$1C
				DFB	$00,$A7,$1C
				DFB	$00,$A7,$38
				DFB	$00,$01,$38
				DFB	$00,$01,$1C
				DFB	$FF
PPIC0			DFB	$87,$B6,$10
				DFB	$17,$00,$00
				DFB	$01,$0F,$3F
				DFB	$7F,$7F,$3F
				DFB	$0F,$01,$FE
				DFB	$27,$00,$07
				DFB	$79,$7E,$FE
				DFB	$06,$7F,$3F
				DFB	$0F,$07,$03
				DFB	$01,$FE,$21
				DFB	$00,$03,$7F
				DFB	$7F,$3F,$5F
				DFB	$6F,$77,$7B
				DFB	$7B,$7D,$7D
				DFB	$7E,$7E,$7E
				DFB	$7F,$7F,$7F
				DFB	$3F,$3F,$5F
				DFB	$1F,$1F,$1F
				DFB	$FE,$04,$0F
				DFB	$FE,$06,$07
				DFB	$FE,$0B,$03
				DFB	$06,$01,$0F
				DFB	$01,$FE,$0E
				DFB	$7E,$FE,$05
				DFB	$3E,$FE,$08
				DFB	$5E,$FE,$10
				DFB	$6E,$5E,$00
				DFB	$FE,$0E,$7F
				DFB	$7E,$7E,$7E
				DFB	$FE,$05,$7D
				DFB	$FE,$08,$7B
				DFB	$FE,$10,$77
				DFB	$7B,$00,$7F
				DFB	$7F,$7F,$40
				DFB	$7F,$7F,$7C
				DFB	$7B,$77,$6F
				DFB	$5F,$5F,$3F
				DFB	$3F,$FE,$04
				DFB	$7F,$7E,$7E
				DFB	$7C,$7C,$7B
				DFB	$78,$78,$78
				DFB	$FE,$04,$70
				DFB	$FE,$06,$60
				DFB	$FE,$0B,$40
				DFB	$60,$00,$70
				DFB	$00,$00,$60
				DFB	$1F,$FE,$07
				DFB	$7F,$7C,$70
				DFB	$60,$40,$FE
				DFB	$24,$00,$40
				DFB	$78,$7E,$7F
				DFB	$7F,$7E,$70
				DFB	$FE,$27,$00

				SAV	ORB.GREEN
