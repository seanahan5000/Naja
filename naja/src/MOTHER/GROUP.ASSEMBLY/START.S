COUNTER2		=	$01
COLORHOLD		=	$02

TOP				=	$11
BOTTOM			=	$12
LEFT			=	$13
RIGHT			=	$14

				LDA	KEYBRD
				BPL	NOCLEAR
				JSR	CHECK_UP
				BNE	NOCLEAR
				BIT	UNSTROB
NOCLEAR			LDA	#$40
				STA	PAGE
				JSR	CLEAR2

				LDA	#$03
				STA	COUNTER2
:LOOP1			LDY	COUNTER2
				JSR	PICKER
				LDX	COUNTER2
				LDA	COLOR_AREAS,X
				STA	COLOR
				JSR	DO_COLOR
				DEC	COUNTER2
				BPL	:LOOP1

				LDA	#$EA
				STA	STOPPER
				STA	STOPPER+1

				LDA	#$02
				STA	COUNTER2
:LOOP2			LDA	COUNTER2
				ASL
				ASL
				TAX
				LDY	#$00
:LOOP3			LDA	AREAS,X
				STA	TOP,Y
				INX
				INY
				CPY	#$04
				BNE	:LOOP3
				LDX	COUNTER2
				LDA	COLOR_AREAS+4,X
				STA	COLOR
				JSR	DO_COLOR
				DEC	COUNTER2
				BPL	:LOOP2

				LDY	#$04
				STY	COUNTER2
:LOOP4			JSR	PICKER
				INC	COUNTER2
				LDY	COUNTER2
				CPY	#$09
				BNE	:LOOP4

				LDA	#<DTEXT
				STA	POINTL
				LDA	#>DTEXT
				STA	POINTH
				JSR	TEXTOUT

				LDA	#$03
				STA	COUNTER2
:LOOP5			LDA	COUNTER2
				TAY
				ASL
				TAX
				LDA	SLINES,X
				STA	POINTL
				LDA	SLINES+1,X
				STA	POINTH
				LDA	LINE_COLORS,Y
				STA	COLOR
				JSR	LINEOUT
				DEC	COUNTER2
				BPL	:LOOP5

				STA	SCNDARY
					JSR	MOVETO1
				STA	PRIMARY
				LDA	#$20
				STA	PAGE
				LDA	#$7F
				PHA
				LDA	#$FF
				PHA
				LDA	#$80
				STA	SSTOREH
				LDX	#<$00D9
				LDY	#>$00D9
				LDA	#$13
				JMP	FLOADER

DO_COLOR		LDA	COLOR
				STA	COLORHOLD
				INC	RIGHT
				INC	BOTTOM
				LDX	TOP
CLOOP1			LDA	LOBYTES,X
				STA	SCREENL
				LDA	HIBYTES,X
				ORA	PAGE
				STA	SCREENH
				LDY	LEFT
CLOOP2			LDA	COLOR
STOPPER			AND	(SCREENL),Y
				STA	(SCREENL),Y
				LDA	COLOR
				EOR	#$7F
				STA	COLOR
				INY
				CPY	RIGHT
				BNE	CLOOP2
				LDA	COLORHOLD
				EOR	#$7F
				STA	COLORHOLD
				STA	COLOR
				INX
				CPX	BOTTOM
				BNE	CLOOP1
				RTS

PICKER			TYA
				ASL
				TAY
				LDA	PICTURES,Y
				STA	TBLPNTL
				LDA	PICTURES+1,Y
				STA	TBLPNTH
				JMP	EXPANDR

PICTURES		DW	LEFT_BASE
				DW	LEFT_DESK
				DW	RIGHT_DESK
				DW	RIGHT_BASE
				DW	PLANT
				DW	TREPR
				DW	CUP
				DW	FLAG
				DW	BUBBLES

SLINES			DW	SLINE0
				DW	SLINE1
				DW	SLINE2
				DW	SLINE3

AREAS			DFB	165,183,2,7
				DFB	129,146,13,25
				DFB	169,187,13,36

COLOR_AREAS		DFB	RED,RED,RED,BLUE
				DFB	RED,BLUE,BLUE

LINE_COLORS		DFB	WHITE2,RED,WHITE1,BLUE

DTEXT			PLOTAT	122;150;(GROUP)
				PLOTAT	113;160;(ASSEMBLY)+

SLINE0			LINEAT	91;169
				LINEAT	91;147
				LINEAT	181;147
				LINEAT	181;169
				DFB	$FE
				LINEAT	92;147
				LINEAT	92;169
				LINEAT	180;169
				LINEAT	180;147
				DFB	$FE
				LINEAT	0;115
				LINEAT	9;115
				DFB	$FE
				LINEAT	0;168
				LINEAT	5;168
				DFB	$FE
				LINEAT	207;63
				LINEAT	219;63
				DFB	$FE
				LINEAT	203;115
				LINEAT	219;115
				DFB	$FE
				LINEAT	266;168
				LINEAT	278;168
				DFB	$FF

SLINE1			LINEAT	65;126
				LINEAT	209;126
				DFB	$FE
				LINEAT	65;127
				LINEAT	209;127
				DFB	$FE
				LINEAT	19;164
				LINEAT	21;164
				DFB	$FE
				LINEAT	41;164
				LINEAT	63;164
				DFB	$FE
				LINEAT	182;168
				LINEAT	257;168
				DFB	$FF

SLINE2			LINEAT	0;63
				LINEAT	14;63
				DFB	$FE
				LINEAT	15;115
				LINEAT	23;115
				DFB	$FE
				LINEAT	24;63
				LINEAT	71;63
				LINEAT	71;115
				LINEAT	39;115
				DFB	$FE
				LINEAT	71;63
				LINEAT	112;63
				DFB	$FE
				LINEAT	87;115
				LINEAT	71;115
				LINEAT	71;124
				DFB	$FE
				LINEAT	71;129
				LINEAT	71;131
				DFB	$FE
				LINEAT	160;63
				LINEAT	207;63
				LINEAT	207;124
				DFB	$FE
				LINEAT	207;129
				LINEAT	207;136
				DFB	$FE
				LINEAT	273;63
				LINEAT	278;63
				DFB	$FE
				LINEAT	273;115
				LINEAT	278;115
				DFB	$FF

SLINE3			LINEAT	0;4
				LINEAT	278;4
				LINEAT	278;26
				LINEAT	234;26
				LINEAT	234;34
				LINEAT	0;34
				LINEAT	0;4
				DFB	$FF
