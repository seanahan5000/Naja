SCREENL			=	$00
SCREENH			=	$01
DESTINL			=	$02
DESTINH			=	$03

LOBYTES			=	$0800
HIBYTES			=	$08C0

				ORG	$6000

PREPARE			LDA	#$00
				STA	DESTINL
				LDA	#$40
				STA	DESTINH

				LDX	#0
:LOOP1			LDA	LOBYTES,X
				STA	SCREENL
				LDA	HIBYTES,X
				ORA	#$20
				STA	SCREENH

				LDY	#0
:LOOP2			LDA	(SCREENL),Y
				AND	#%01111111
				STA	(DESTINL),Y
				INY
				CPY	#40
				BNE	:LOOP2

				LDA	DESTINL
				CLC
				ADC	#40
				STA	DESTINL
				BCC	:SKIPA
				INC	DESTINH
:SKIPA			INX
				CPX	#192
				BNE	:LOOP1
				RTS

				SAV	PREPARE
